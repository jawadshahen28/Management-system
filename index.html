<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <!-- تحسين متقدم للهواتف مع التكبير والتصغير المسموح -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes, viewport-fit=cover">
    <title>مدير الدار - النظام المالي الذكي | جواد شاهين</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Cairo:wght@300;400;500;600;700;800&family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <!-- Chart.js و Moment.js محذوفان لأننا لا نستخدمهما بشكل مباشر، لكن نبقي Moment للتاريخ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/locale/ar.js"></script>
    <!-- ربط ملف CSS الخارجي (style.css) -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- خلفية إدارية فاخرة (مضبوطة للهاتف) -->
    <div class="executive-bg">
        <div class="bg-gradient"></div>
        <div class="bg-pattern"></div>
        <div class="bg-abstract"></div>
        <div class="corner-accent"></div>
        <div class="corner-accent-right"></div>
    </div>

    <div class="container">
        <!-- الهيدر التنفيذي -->
        <div class="executive-header">
            <div class="brand-executive">
                <div class="brand-emblem">
                    <i class="fas fa-crown"></i>
                </div>
                <div class="brand-title">
                    <h1>مدير الدار</h1>
                    <span><i class="fas fa-shield-alt"></i> النظام المالي v2.0</span>
                </div>
            </div>
            <div class="date-time-executive">
                <div class="date-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="currentDate">...</span>
                </div>
                <div class="time-item">
                    <i class="fas fa-clock"></i>
                    <span id="currentTime">...</span>
                </div>
            </div>
        </div>

        <!-- بطاقات الإحصائيات الفاخرة -->
        <div class="stats-executive" id="statsGrid"></div>

        <!-- تنبيه ذكي (يظهر فقط عند تجاوز المصاريف) -->
        <div id="expenseAlert" class="glass-dark-card" style="display: none; margin-bottom: 20px; background: rgba(179, 58, 74, 0.2); border-color: var(--ruby-500); padding: 16px 20px;">
            <div style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap;">
                <div style="background: rgba(179, 58, 74, 0.3); padding: 12px; border-radius: 18px;">
                    <i class="fas fa-exclamation-triangle" style="color: var(--ruby-400); font-size: 24px;"></i>
                </div>
                <div>
                    <h4 style="color: white; font-weight: 800; margin-bottom: 4px; font-size: 18px;">تنبيه الميزانية</h4>
                    <p style="color: var(--gray-300); font-size: 14px;">المصاريف تتجاوز المتحصل. اتخذ إجراءً.</p>
                </div>
            </div>
        </div>

        <!-- الشبكة الرئيسية (تتحول إلى عمودي في الهاتف) -->
        <div class="dashboard-grid">
            <!-- بطاقة إدارة الأعضاء -->
            <div class="glass-dark-card">
                <div class="card-header-luxury">
                    <h2><i class="fas fa-users"></i> إدارة الأعضاء</h2>
                    <span class="member-stats-badge" id="memberStats">0/0</span>
                </div>

                <!-- نموذج إضافة عضو (عمودي في الهاتف) -->
                <div class="form-luxury">
                    <div class="form-group-luxury">
                        <label><i class="fas fa-user-tie"></i> اسم العضو</label>
                        <input type="text" id="memberNameInput" placeholder="الاسم الكامل" autocomplete="off">
                    </div>
                    <button class="btn-luxury" id="addMemberBtn">
                        <i class="fas fa-plus-circle"></i>
                        إضافة
                    </button>
                </div>

                <!-- جدول الأعضاء مع تمرير أفقي للهواتف الصغيرة -->
                <div class="table-responsive">
                    <table class="table-luxury">
                        <thead>
                            <tr>
                                <th>العضو</th>
                                <th>الحالة</th>
                                <th>تاريخ الدفع</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="membersTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- بطاقة إدارة المصاريف -->
            <div class="glass-dark-card">
                <div class="card-header-luxury">
                    <h2><i class="fas fa-file-invoice-dollar"></i> إدارة المصاريف</h2>
                    <span class="expense-total-badge" id="expenseTotalBadge">0 ₪</span>
                </div>

                <!-- نموذج إضافة مصروف (عمودي في الهاتف) -->
                <div class="form-luxury">
                    <div class="form-group-luxury">
                        <label><i class="fas fa-tag"></i> اسم المصروف</label>
                        <input type="text" id="expenseNameInput" placeholder="مثال: الكهرباء">
                    </div>
                    <div class="form-group-luxury">
                        <label><i class="fas fa-coins"></i> المبلغ (₪)</label>
                        <input type="number" id="expenseAmountInput" placeholder="0.00">
                    </div>
                    <button class="btn-luxury" id="addExpenseBtn">
                        <i class="fas fa-plus-circle"></i>
                        إضافة
                    </button>
                </div>

                <!-- جدول المصاريف -->
                <div class="table-responsive">
                    <table class="table-luxury">
                        <thead>
                            <tr>
                                <th>البيان</th>
                                <th>المبلغ</th>
                                <th>التاريخ</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="expensesTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- سجل المعاملات -->
        <div class="glass-dark-card transactions-panel">
            <div class="card-header-luxury">
                <h2><i class="fas fa-history"></i> سجل المعاملات</h2>
                <button class="btn-luxury btn-outline" id="clearLogsBtn">
                    <i class="fas fa-trash-alt"></i> مسح
                </button>
            </div>
            <div id="transactionsList" class="transactions-list"></div>
        </div>

        <!-- زر بدء شهر جديد (متمركز ومناسب للهاتف) -->
        <div class="new-month-section">
            <button class="btn-luxury btn-outline" id="newMonthBtn">
                <i class="fas fa-calendar-plus"></i>
                بدء شهر جديد - إعادة تعيين الدفع
            </button>
        </div>

        <!-- ========== توقيع المبرمج ومدير القاعدة (متجاوب مع الهاتف) ========== -->
        <div class="signature-area">
            <div class="developer-signature">
                <div class="dev-badge">
                    <i class="fas fa-code"></i>
                </div>
                <div class="dev-info">
                    <h3>جـ<span>و</span>اد شـ<span>اه</span>ين</h3>
                    <p><i class="fas fa-crown" style="color: var(--gold-500);"></i> مطور أنظمة مالية</p>
                    <p class="copyright-text"><i class="fas fa-certificate"></i> جواد شاهين © 2026</p>
                </div>
            </div>
            
            <div class="manager-signature">
                <div class="manager-badge">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div class="manager-info">
                    <h4><span>نعمان</span> | مدير القاعدة</h4>
                    <p><i class="fas fa-check-circle" style="color: var(--emerald-400);"></i> الإشراف المالي</p>
                    <p class="location-text"><i class="fas fa-map-marker-alt"></i> قاعدة الدار</p>
                </div>
            </div>
            
            <div class="version-info">
                <i class="fas fa-database"></i>
                <span>v2.0.0</span>
                <span class="separator"></span>
                <i class="fas fa-shield-alt"></i>
                <span>موثوق</span>
            </div>
        </div>
    </div>

    <!-- ربط ملف JavaScript الخارجي (script.js) -->
    <script src="script.js"></script>
</body>
</html>